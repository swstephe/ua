doctype html
html(ng-app='messages')
  head
    title Using ng-messages
    link(rel='stylesheet',href='/bootstrap/css/bootstrap.css')
    style.
      .validation {
        color: maroon;
      }
  body(style={'margin-top': '12px'},ng-controller='MainCtrl')
    .container
      h3 Using ng-message
      form(name='version1')
        .form-group
          label.control-label Email
          input.form-control(
              type='email'
              ng-model='email1'
              name='email1'
              required
              ng-minlength=8
              ng-maxlength=32
          )
          .validation(ng-messages='version1.email1.$error')
            div(ng-message='required') Please enter your email address
            div(ng-message='minlength, maxlength')
              | Your email must be between 8 and 32 characters long
            div(ng-message='email') This is not a valid email
        button.btn.btn-primary(
            ng-click='save()'
            ng-disabled='version1.$invalid'
        ) Save

      h3 Using static ng-message-exp
      form(name='version2')
        .form-group
          label.control-label Email
          input.form-control(
            type='email'
            ng-model='email2'
            name='email2'
            required
            ng-minlength=8
            ng-maxlength=32
          )
          .validation(ng-messages='version2.email2.$error')
            div(ng-message-exp='regExpr') Please enter your email address
            div(ng-message-exp='minMaxExpr')
              | Your email must be between 8 and 32 characters long
            div(ng-message-exp='emailExpr') This is not a valid email
        button.btn.btn-primary(
          ng-click='save()'
          ng-disabled='version2.$invalid'
        ) Save

      h3 Using dynamic ng-message-exp
      form(name='version3')
        .form-group
          label.control-label Email
          input.form-control(
            type='email'
            ng-model='email3'
            name='email3'
            required
            ng-minlength=8
            ng-maxlength=32
          )
          .validation(ng-messages='version3.email3.$error')
            div(ng-repeat='m in myMessages')
              div(ng-message-exp='m.expr') {{m.text}}
        button.btn.btn-primary(
          ng-click='save()'
          ng-disabled='version3.$invalid'
        ) Save
    script(src='/angular/angular.js')
    script(src='/angular-messages/angular-messages.js')
    script
      :coffee-script
        angular.module 'messages', ['ngMessages']
        .controller 'MainCtrl', ($scope, $http) ->
          $scope.myMessages = []
          $scope.reqExpr = 'required'
          $scope.minMaxExpr = ['minlength', 'maxlength']
          $scope.emailExpr = 'email'
          $scope.save = -> alert "Your email has been saved."
          $http.get 'mymessages.json'
          .then (response) -> $scope.myMessages = response.data
